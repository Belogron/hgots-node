<div ng-controller="AdminUserController">
  <h1 class="page-header" ng-cloak>
    {{user.username}}
    <span ng-if="userIsSelf()" class="small pull-right">
      <span class="label label-default">
        <span class="mega-octicon octicon-octoface"></span>
        You
      </span>
    </span>
  </h1>
  
  <div class="row">
    <div class="col-lg-6">
      <!-- User info -->
      <h4>User info</h4>
      <form class="form-horizontal" id="editUser">
        <div class="form-group">
          <label class="control-label col-sm-2" for="edituser-name">Name:</label>
          <div class="col-sm-10">
            <input type="text" id="edituser-name" class="form-control" placeholder="Username" ng-model="newUsername">
          </div>
        </div>
        <div class="form-group">
          <label class="control-label col-sm-2" for="edituser-type">Type:</label>
          <div class="col-sm-10">
            <select id="edituser-type" class="form-control" ng-model="newType" ng-options="type as type for type in userTypes" ng-disabled="userIsSelf()">
            </select>
          </div>
        </div>
        <div class="form-group">
          <label class="control-label col-sm-2" for="edituser-pw1">Password:</label>
          <div class="col-sm-10">
            
            <!-- SubView: Password Strength -->
            <div class="password-strength-view" ng-controller="PasswordStrengthViewController">
              <div class="input-group">
                <input type="password" id="edituser-pw1" class="form-control" placeholder="Password" ng-model="password" ng-change="$parent.newPassword=password" require>
                <span class="input-group-addon">{{estimation}}</span>
              </div>
              <div class="bar {{barClass}}"></div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="control-label col-sm-2" for="edituser-pw2">Repeat Password:</label>
          <div class="col-sm-10">
            <input type="password" id="edituser-pw2" class="form-control" placeholder="Password (repeat)" ng-model="newPasswordRepeat">
          </div>
        </div>
        
        <div class="form-actions">
          <div class="row">
            <button class="btn btn-success col-xs-6 col-xs-offset-1" ng-disabled="!canSaveChanges" ng-click="saveUser()">
              <span ng-if="canSaveChanges" class="octicon octicon-check"></span>
              Save
            </button>
            <button class="btn btn-danger col-xs-3 col-xs-offset-1" ng-click="deleteUser()" ng-disabled="userIsSelf()">
              <span class="octicon octicon-x"></span>
              Delete
            </button>
          </div>
        </div>
      </form>
      
    </div>
    <div class="col-lg-6">
      <!-- Cards -->
      <h4>Associated Cards</h4>
      <ul class="list-group cards">
        <li class="list-group-item">
          <div class="row">
            <div class="col-md-12">
              <input type="text" class="form-control" placeholder="Add new rfid tag with id..." ng-model="newCardID">
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8">
              <button class="btn btn-default" data-loading-text="Please put your card in front of the reader..." ng-click="getRFID()" ng-disabled="currentlyLoadingRFIDResponse">
                Get from RFID Reader
              </button>
            </div>
            <div class="col-sm-4">
              <button class="btn btn-success pull-right" ng-disabled="newCardDisabled" ng-click="addCard()">
                <span ng-if="!newCardDisabled" class="octicon octicon-check"></span>
                Add
              </button>
            </div>
          </div>
        </li>
        <li ng-repeat="card in user.cards" class="list-group-item" ng-cloak>
          <div class="row">
            <div class="col-md-8">
              <b>{{card.uid}}</b>
            </div>
            <div class="col-md-4">
              <button class="btn btn-danger pull-right" ng-click="deleteCard(card)" title="Remove">
                <span class="octicon octicon-x no-text"></span>
              </button>
            </div>
          </div>
        </li>
      </ul>
      
    </div>
  </div>
  
</div>
